<div class="create-room-form">
  <h2 class="form-title">Create Your Poll</h2>

  <form (ngSubmit)="onSubmit()" class="form">
    <!-- Question Input -->
    <div class="form-group">
      <label for="question" class="form-label">
        What are you planning? <span class="required">*</span>
      </label>
      <input
        id="question"
        type="text"
        class="form-input"
        placeholder="Gaming when? Movie night? Book club?"
        [value]="question()"
        (input)="question.set($any($event.target).value)"
        [disabled]="isSubmitting()"
        maxlength="200"
      />
    </div>

    <!-- Time Options List -->
    <div class="form-group">
      <label class="form-label"> Time Options <span class="required">*</span> </label>

      <div class="options-list">
        @for (option of timeOptions(); track trackByOptionId($index, option)) {
        <div class="option-row">
          <input
            type="text"
            class="form-input option-input"
            placeholder="e.g., Saturday 8 PM, Tomorrow 7-9 PM"
            [value]="option.value"
            (input)="updateOption(option.id, $any($event.target).value)"
            [disabled]="isSubmitting()"
            maxlength="100"
          />
          @if (timeOptions().length > 1) {
          <button
            type="button"
            class="btn-remove"
            (click)="removeOption(option.id)"
            (mouseenter)="onButtonHover($event)"
            (mouseleave)="onButtonHoverOut($event)"
            [disabled]="isSubmitting()"
            aria-label="Remove option"
          >
            âœ•
          </button>
          }
        </div>
        }
      </div>

      <button
        type="button"
        class="btn-add-option"
        (click)="addOption(); onButtonClick($event)"
        (mouseenter)="onButtonHover($event)"
        (mouseleave)="onButtonHoverOut($event)"
        [disabled]="isSubmitting()"
      >
        + Add option
      </button>
    </div>

    <!-- Error Message -->
    @if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
    }

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn-submit"
      (mouseenter)="onButtonHover($event)"
      (mouseleave)="onButtonHoverOut($event)"
      [disabled]="isSubmitting()"
    >
      @if (isSubmitting()) {
      <span class="spinner"></span>
      <span>Creating Room...</span>
      } @else {
      <span>Create Room ðŸŽ‰</span>
      }
    </button>
  </form>
</div>
